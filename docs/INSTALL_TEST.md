# 安裝測試指南

本指南將協助您安裝和測試技嘉出勤時間追蹤器擴充套件。

## 📋 安裝前檢查清單

在開始安裝前，請確認：

- [ ] 您有技嘉 EIP 系統的有效帳號
- [ ] 您的帳號格式為 `gigabyte\your.username`
- [ ] 您可以正常存取技嘉 EIP 系統
- [ ] Microsoft Edge 瀏覽器版本為最新版

## 🚀 安裝步驟

### 步驟 1：下載專案檔案

1. 下載或克隆此專案到本機
2. 解壓縮到一個容易找到的資料夾

### 步驟 2：在 Edge 中載入擴充套件

1. 開啟 Microsoft Edge 瀏覽器
2. 在網址列輸入 `edge://extensions/` 並按 Enter
3. 在右上角開啟「開發人員模式」開關
4. 點擊「載入解壓縮」按鈕
5. 選擇專案資料夾（包含 manifest.json 的資料夾）
6. 點擊「選擇資料夾」

### 步驟 3：確認安裝成功

安裝成功後，您應該會看到：
- 擴充套件出現在 `edge://extensions/` 頁面中
- 瀏覽器工具列出現擴充套件圖示
- 沒有錯誤訊息顯示

## 🧪 功能測試

### 測試 1：基本介面測試

1. 點擊瀏覽器工具列上的擴充套件圖示
2. 確認 popup 視窗正常開啟
3. 檢查介面元素是否正確顯示：
   - [ ] 標題「技嘉出勤追蹤器」
   - [ ] 狀態指示器顯示「未連線」
   - [ ] 登入表單正常顯示
   - [ ] 帳號和密碼輸入框
   - [ ] 「記住登入資訊」選項
   - [ ] 登入按鈕

### 測試 2：帳號格式驗證測試

1. 在帳號欄位輸入錯誤格式（例如：`testuser`）
2. 輸入任意密碼
3. 點擊登入
4. 確認顯示格式錯誤訊息

### 測試 3：登入功能測試

1. 輸入正確的帳號格式：`gigabyte\your.username`
2. 輸入正確的密碼
3. 點擊登入
4. 確認以下行為：
   - [ ] 顯示載入指示器
   - [ ] 成功登入後切換到出勤資訊介面
   - [ ] 狀態指示器變為「已連線」

### 測試 4：出勤資料顯示測試

登入成功後，檢查出勤資訊區域：
- [ ] 今日日期正確顯示
- [ ] 上班時間正確顯示（如已打卡）
- [ ] 下班時間顯示（如已打卡或顯示 --:--）
- [ ] 預計下班時間根據彈性制度計算
- [ ] 剩餘時間或超時時間正確顯示

### 測試 5：時間計算邏輯測試

在瀏覽器控制台中執行測試：

1. 在 popup 視窗中按 F12 開啟開發者工具
2. 切換到 Console 標籤
3. 執行以下命令測試時間計算：

```javascript
// 測試早到上班（8:25）
timeCalculator.calculateExpectedClockOut("08:25")

// 測試彈性時間上班（9:15）
timeCalculator.calculateExpectedClockOut("09:15")

// 測試準時上班（9:30）
timeCalculator.calculateExpectedClockOut("09:30")

// 測試遲到上班（10:00）
timeCalculator.calculateExpectedClockOut("10:00")
```

### 測試 6：重新整理功能測試

1. 點擊「重新整理」按鈕
2. 確認資料重新載入
3. 檢查是否顯示成功訊息

### 測試 7：登出功能測試

1. 點擊「登出」按鈕
2. 確認回到登入介面
3. 檢查狀態指示器變為「未連線」

## 🐛 常見問題排除

### 問題 1：擴充套件無法載入

**症狀**：在載入擴充套件時出現錯誤

**解決方案**：
1. 檢查是否選擇了正確的資料夾（包含 manifest.json）
2. 確認所有必要檔案都存在
3. 檢查 manifest.json 語法是否正確

### 問題 2：圖示無法顯示

**症狀**：擴充套件圖示顯示為預設圖示，或出現 "Couldn't load icon" 錯誤

**解決方案**：
1. **快速解決**：功能不受影響，可以正常使用（已移除 manifest.json 中的圖示引用）
2. **完整解決**：生成圖示檔案
   - 開啟專案中的 `tools/generate-icons.html` 檔案
   - 點擊「下載所有圖示」按鈕
   - 將下載的 icon16.png, icon32.png, icon48.png, icon128.png 放到 `icons/` 資料夾
   - 在 manifest.json 中重新加入圖示設定：
   ```json
   "action": {
     "default_popup": "popup.html",
     "default_title": "技嘉出勤時間追蹤器",
     "default_icon": {
       "16": "icons/icon16.png",
       "32": "icons/icon32.png",
       "48": "icons/icon48.png",
       "128": "icons/icon128.png"
     }
   },
   "icons": {
     "16": "icons/icon16.png",
     "32": "icons/icon32.png",
     "48": "icons/icon48.png",
     "128": "icons/icon128.png"
   }
   ```
   - 重新載入擴充套件

### 問題 3：登入失敗

**症狀**：輸入正確帳號密碼後仍然登入失敗

**可能原因**：
1. 網路連線問題
2. 技嘉 EIP 系統暫時無法存取
3. 帳號密碼錯誤
4. CORS 政策限制

**解決方案**：
1. 檢查網路連線
2. 確認可以正常存取技嘉 EIP 系統
3. 重新確認帳號密碼
4. 查看瀏覽器控制台錯誤訊息

### 問題 4：時間計算錯誤

**症狀**：預計下班時間計算不正確

**解決方案**：
1. 在控制台執行測試函數檢查
2. 確認上班時間格式正確
3. 檢查彈性上班制度規則是否正確實作

## 📊 測試報告範本

完成測試後，請填寫以下報告：

```
測試日期：____/____/____
測試者：________________
Edge 版本：_____________

✅ 通過的測試：
□ 基本介面測試
□ 帳號格式驗證測試
□ 登入功能測試
□ 出勤資料顯示測試
□ 時間計算邏輯測試
□ 重新整理功能測試
□ 登出功能測試

❌ 失敗的測試：
（請詳細描述問題）

💡 建議改進：
（請提供改進建議）
```

## 🔧 開發者除錯

如果您是開發者，可以使用以下方式進行更詳細的除錯：

### 檢查背景腳本

1. 前往 `edge://extensions/`
2. 找到擴充套件，點擊「詳細資料」
3. 點擊「檢查檢視：背景頁面」
4. 查看控制台錯誤訊息

### 執行完整測試套件

在 popup 控制台中執行：

```javascript
// 載入測試資料
// 然後執行完整測試
testFunctions.runAllTests()
```

## 📞 支援

如果遇到問題，請：

1. 檢查本指南的常見問題排除
2. 查看專案的 GitHub Issues
3. 提交新的 Issue 並附上詳細的錯誤資訊

---

**注意**：此擴充套件僅供技嘉員工內部使用，請確保符合公司相關政策。
