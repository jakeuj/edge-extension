# 變更日誌 (Changelog)

## [1.0.7] - 2024-12-26

### 新增功能 (Added)
- ⚙️ **自訂異常記錄搜尋天數設定**
  - 新增設定項目：可自訂搜尋過去幾天內的出勤異常記錄
  - 支援 1-365 天的範圍設定
  - 預設值為 45 天
  - 設定變更後立即生效，自動重新查詢資料

- 🕐 **時鐘顯示優化**
  - 增大翻頁時鐘的顯示大小，提升可讀性
  - 在時鐘上方新增「剩餘時間」標題文字
  - 優化時鐘整體視覺效果

- 🎨 **翻頁動畫主題適配**
  - 修復翻頁時鐘動畫顏色問題
  - 翻頁動畫現在完全響應主題變化
  - 針對白色、黑夜、莫蘭迪三種主題優化動畫效果
  - 消除動畫過程中的灰色閃爍問題

### 改進功能 (Improved)
- 📊 **動態資訊顯示**
  - 異常記錄頁面提示文字現在動態顯示實際設定的天數
  - 「恭喜！過去X天內沒有出勤異常記錄」文字同步更新
  - 設定變更即時反映在 UI 上

- 🔧 **設定管理優化**
  - 新增數字輸入欄位的主題適配樣式
  - 改善設定項目的視覺設計
  - 優化設定載入和儲存邏輯

### 技術改進 (Technical)
- 🎯 **API 查詢邏輯優化**
  - `getAbnormalAttendance()` 方法支援自訂天數參數
  - 自動從使用者設定中讀取搜尋天數
  - 向後相容，未設定時使用預設值

- 💾 **儲存系統擴展**
  - StorageManager 新增 `abnormalSearchDays` 設定項目
  - 完善的設定驗證和錯誤處理
  - 設定變更的即時儲存機制

- 🎨 **CSS 樣式系統**
  - 新增翻頁時鐘專用 CSS 變數
  - 覆蓋第三方庫的硬編碼顏色
  - 完善的主題特定樣式規則

### 修復問題 (Fixed)
- 🐛 修復翻頁時鐘在白色主題下出現黑色/灰色閃爍的問題
- 🎨 修復翻頁動畫過程中顏色不響應主題變化的問題
- 📱 修復設定頁面數字輸入欄位的主題適配問題
- 🔄 修復異常記錄頁面提示文字不會動態更新的問題

### 文件變更 (Files Changed)
- `manifest.json` - 版本號更新至 1.0.7
- `popup.html` - 新增異常搜尋天數設定 UI、時鐘標題
- `styles/popup.css` - 新增數字輸入樣式、翻頁動畫主題適配、時鐘大小調整
- `scripts/popup.js` - 新增設定處理邏輯、動態文字更新
- `scripts/api.js` - 修改異常記錄查詢支援自訂天數
- `scripts/storage.js` - 新增異常搜尋天數設定項目

---

## [未發布] - 2024-12-XX

### 新增功能 (Added)
- 🎨 **新增莫蘭迪色系主題**
  - 第三個主題選項：柔和優雅的低飽和度主題
  - 溫暖的米白色背景配色
  - 柔和的藍灰色主色調
  - 完整的狀態色彩系統

- 🔄 **設定頁面導航優化**
  - 新增返回按鈕 (左上角)
  - 智能按鈕顯示/隱藏邏輯
  - 平滑的頁面切換體驗

- 🛡️ **登出確認機制**
  - 自定義確認對話框
  - 防止意外登出操作
  - 支援鍵盤和觸控操作
  - 與主題系統完全整合

### 改進功能 (Improved)
- 📱 **今日出勤資訊重設計**
  - 分離基本出勤資訊和預計時間資訊
  - 卡片化設計提升視覺層次
  - 優化間距和視覺舒適度
  - 新增懸停效果和互動反饋

- 🎯 **出勤異常區域優化**
  - 移除背景色，提升可讀性
  - 優化上下間距為 10px
  - 確保主題相容性
  - 改善視覺層次

### 技術改進 (Technical)
- 🔧 **主題系統擴展**
  - 擴展 CSS 變數系統
  - 更新 themeManager.js 主題定義
  - 新增主題預覽樣式

- 🧩 **組件化設計**
  - 可重複使用的確認對話框組件
  - 模組化的按鈕管理系統
  - 統一的事件處理邏輯

### 修復問題 (Fixed)
- 🐛 修復 `.info-row.highlight` 不合理的 `margin-top: 100px`
- 🎨 改善主題切換時的視覺一致性
- 📱 優化響應式設計在小螢幕上的顯示

### 文件變更 (Files Changed)
- `popup.html` - 新增 UI 元素和主題選項
- `styles/popup.css` - 新增主題樣式和 UI 優化
- `scripts/popup.js` - 新增功能邏輯和事件處理
- `scripts/themeManager.js` - 擴展主題定義

### 設計細節 (Design Details)

#### 莫蘭迪色系配色方案
```css
主色調: #8b9dc3 (柔和藍灰色)
背景色: #f7f5f3 (溫暖米白色)
文字色: #4a4a4a (深灰色)
成功色: #a8c4a2 (柔和綠色)
警告色: #d4b896 (柔和橙色)
錯誤色: #c4a2a2 (柔和紅色)
資訊色: #a2b8c4 (柔和藍色)
```

#### UI 改進重點
- 卡片化設計語言
- 柔和的陰影效果
- 優雅的過渡動畫
- 一致的視覺層次

### 相容性 (Compatibility)
- ✅ 向後相容所有現有功能
- ✅ 支援 Chrome/Edge 瀏覽器
- ✅ 響應式設計適配各種螢幕尺寸
- ✅ 觸控設備友好

### 測試覆蓋 (Testing)
- ✅ 主題切換功能測試
- ✅ 設定頁面導航測試
- ✅ 登出確認流程測試
- ✅ 響應式設計測試
- ✅ 跨瀏覽器相容性測試

### 效能影響 (Performance)
- 📈 CSS 變數系統提升主題切換效能
- 📈 優化的動畫使用 CSS transform
- 📈 模組化設計減少代碼重複
- 📈 無額外的外部依賴

---

## 如何提交這個 PR

### 1. 準備 Git 提交
```bash
# 添加所有修改的文件
git add popup.html styles/popup.css scripts/popup.js scripts/themeManager.js

# 提交變更
git commit -m "feat: 新增莫蘭迪色系主題與 UI/UX 優化

- 新增莫蘭迪色系主題選項
- 優化設定頁面導航體驗
- 新增登出確認機制
- 重設計今日出勤資訊佈局
- 優化出勤異常區域顯示
- 改善整體 UI/UX 體驗"
```

### 2. 推送到您的分支
```bash
# 推送到您的功能分支
git push origin feature/morandi-theme-ui-improvements
```

### 3. 建立 Pull Request
1. 前往 GitHub 倉庫頁面
2. 點擊 "New Pull Request"
3. 選擇您的功能分支
4. 複製 PR_DESCRIPTION.md 的內容作為 PR 描述
5. 添加適當的標籤 (enhancement, ui/ux, theme)
6. 指派給專案負責人進行審核

### 4. PR 審核要點
- 功能完整性測試
- 代碼品質審查
- 設計一致性檢查
- 相容性驗證
- 效能影響評估
